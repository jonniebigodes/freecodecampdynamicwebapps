'use strict';var dbService=require('./dbFactory');module.exports={changeUserData:function changeUserData(a,b){return a.body.userToken?void(dbService.setUrl(a.app.MONGODB),dbService.connect().then(function(){return dbService.searchByID({collectionName:'users',queryParam:{_id:a.body.userToken}})}).then(function(c){dbService.updateById({collectionName:'users',queryParam:{dataselect:{item:c[0]._id},datacriteria:{$set:{state:a.body.countrystate===void 0?c.state:a.body.countrystate,city:a.body.city===void 0?c.city:a.body.city,full_name:a.body.fullusername===void 0?c.full_name:a.body.fullusername,country:a.body.country===void 0?c.country:a.body.country}}}}).then(function(a){dbService.disconnect(),console.log('===================================='),console.log('result update info user result:'+JSON.stringify(a,null,2)),console.log('===================================='),b.writeHead(200,{"Content-Type":'application/json'}),b.end(JSON.stringify({code:'fccda005',reason:'Information updated'}))}).catch(function(a){dbService.disconnect(),console.log('===================================='),console.log('error Auth Controller change user data update info:'+JSON.stringify(a,null,2)),console.log('===================================='),b.writeHead(500,{"Content-Type":'application/json'}),b.end(JSON.stringify({code:'fccda001',reason:'Internal Server Error'}))})}).catch(function(a){console.log('===================================='),console.log('error Auth Controller change user data:'+JSON.stringify(a,null,2)),console.log('===================================='),b.writeHead(500,{"Content-Type":'application/json'}),b.end(JSON.stringify({code:'fccda001',reason:'Internal Server Error'}))})):(b.writeHead(500,{"Content-Type":'application/json'}),void b.end(JSON.stringify({code:'fccda001',reason:'No user token was provided'})))}};